<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Character Initiative Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
        form {
            max-width: 400px;
            margin: 0 auto;
        }
        input[type="text"],
        input[type="number"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            box-sizing: border-box;
        }
        input[type="submit"] {
            width: 100%;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        input[type="submit"]:hover {
            background-color: #45a049;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 5px;
            position: relative;
        }
        .editInput {
            display: none;
            width: 50px;
        }
        .editButton {
            position: absolute;
            top: 10px;
            right: 10px;
        }
    </style>
</head>
<body>
    <h1>Character Initiative Tracker</h1>
    <form id="characterForm">
        <input type="text" id="name" placeholder="Name" required>
        <input type="number" id="health" placeholder="Health" required>
        <input type="number" id="initiative" placeholder="Initiative" required>
        <input type="submit" value="Add Character">
    </form>
    <h2>Character List</h2>
    <ul id="characterList"></ul>

    <script>
        document.getElementById("characterForm").addEventListener("submit", function(event) {
            event.preventDefault();
            addCharacter();
        });

        function addCharacter() {
            var name = document.getElementById("name").value;
            var health = document.getElementById("health").value;
            var initiative = document.getElementById("initiative").value;

            var character = {
                name: name,
                health: health,
                initiative: initiative
            };

            var characterList = document.getElementById("characterList");

            var listItem = document.createElement("li");
            listItem.innerHTML = "Name: " + character.name + ", Health: <span class='health'>" + character.health + "</span>, Initiative: " + character.initiative + "<input type='number' class='editInput'>";
            var editButton = document.createElement("button");
            editButton.textContent = "Edit";
            editButton.className = "editButton";
            editButton.addEventListener("click", function() {
                editHealth(listItem);
            });
            listItem.appendChild(editButton);
            characterList.appendChild(listItem);

            sortList();
        }

        function sortList() {
            var characterList = document.getElementById("characterList");
            var characters = Array.from(characterList.getElementsByTagName("li"));

            characters.sort(function(a, b) {
                var initiativeA = parseInt(a.textContent.split(":")[3]);
                var initiativeB = parseInt(b.textContent.split(":")[3]);
                return initiativeB - initiativeA;
            });

            characterList.innerHTML = "";
            characters.forEach(function(character) {
                characterList.appendChild(character);
            });
        }

        function editHealth(characterItem) {
            var healthSpan = characterItem.querySelector(".health");
            var healthInput = characterItem.querySelector(".editInput");

            healthInput.style.display = "inline-block";
            healthInput.value = parseInt(healthSpan.textContent);
            healthSpan.style.display = "none";

            healthInput.addEventListener("blur", function() {
                healthSpan.textContent = healthInput.value;
                healthInput.style.display = "none";
                healthSpan.style.display = "inline-block";
            });
        }
    </script>
</body>
</html>
